<div class="fs-container">

  <div class="fs-inner-container">
    <!-- Map -->
    <div id="map-container">

      <div id="map" data-map-zoom="4" data-map-scroll="true">
          <!-- map goes here -->
      </div>

    </div>
  </div>


  <div class="fs-inner-container">
    <div class="fs-content">

      <!-- Search -->
      <section class="search margin-bottom-30">

        <%= render 'shared/search_form' %>

      </section>
      <!-- Search / End -->

      <!-- Sorting / Layout Switcher -->
      <div class="row fs-switcher">

        <div class="col-md-6">
          <!-- Showing Results -->
          <p class="showing-results"><%= @arrRooms.size %> Results Found </p>
        </div>

        <div class="col-md-6">
          <!-- Layout Switcher -->
          <div class="layout-switcher">
            <a href="#" class="list"><i class="fa fa-th-list"></i></a>
            <a href="#" class="grid"><i class="fa fa-th-large"></i></a>
          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<script>
  function initialize(rooms) {
    var location = {lat: 44.5403, lng: -78.5463}
    if (rooms.length > 0) {
      location = {lat: rooms[0].latitude, lng: rooms[0].longitude}
    }
    var map = new google.maps.Map(document.getElementById('map'), {
      center: location,
      zoom: 12
    });
    var marker, infowindow;
    rooms.forEach(function(room){
      marker = new google.maps.Marker({
        position: {lat: room.latitude, lng: room.longitude},
        map: map
      });
      infowindow = new google.maps.InfoWindow({
        content: "<div class='map_price'>$" + room.price + "</div>"
      });
      infowindow.open(map, marker);
    });
  }
  google.maps.event.addDomListener(window, 'load', function () {
    initialize(<%= raw @arrRooms.to_json %>)
  });
</script>
